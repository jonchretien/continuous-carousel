/*!
 * Continuous Carousel ðŸŽ  v1.0.1
 * Continuous carousel that uses vanilla JavaScript & CSS animations.
 * @author Jon Chretien
 * @license Released under the MIT license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e="undefined"!=typeof globalThis?globalThis:e||self).ContinuousCarousel=t()}(this,function(){"use strict";function e(e,t){this.v=e,this.k=t}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach(function(t){n(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t){var n,r;function o(n,r){try{var u=t[n](r),a=u.value,c=a instanceof e;Promise.resolve(c?a.v:a).then(function(e){if(c){var r="return"===n?"return":"next";if(!a.k||e.done)return o(r,e);e=t[r](e).value}i(u.done?"return":"normal",e)},function(e){o("throw",e)})}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?o(n.key,n.arg):r=null}this._invoke=function(e,t){return new Promise(function(i,u){var a={key:e,arg:t,resolve:i,reject:u,next:null};r?r=r.next=a:(n=r=a,o(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}u.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},u.prototype.next=function(e){return this._invoke("next",e)},u.prototype.throw=function(e){return this._invoke("throw",e)},u.prototype.return=function(e){return this._invoke("return",e)};var a="horizontal",c="vertical",s="data-paused",l={direction:a,numVisible:1,interval:2e3,transitionDuration:1e3,resetDuration:1,pauseOnHover:!1,pauseOnFocus:!1,autoplay:!0,observeVisibility:!0,observeResize:!0,ariaLive:"polite",announceSlides:!0,onSlideChange:null,onPause:null,onPlay:null,reverse:!1,keyboardNav:!0,onDestroy:null};function f(e){var t=e.toLowerCase().trim();if(t!==a&&t!==c)throw new Error('Direction must be either "'.concat(a,'" or "').concat(c,'"'));return t}function v(e){var t=Number(e);if(isNaN(t)||t<1||!Number.isInteger(t))throw new Error("numVisible must be a positive integer");return t}function d(e,t,n){e&&(e.textContent="Item ".concat(t," of ").concat(n))}function m(e){var t=document.createDocumentFragment();return e.forEach(function(e){var n=e.cloneNode(!0);t.appendChild(n)}),t}function b(e,t){Object.entries(t).forEach(function(t){var n=i(t,2),r=n[0],o=n[1];e.style.setProperty(r,o)})}var p={getTransform:function(e){return"translate3d(".concat(e,"px, 0, 0)")},getMeasurement:function(e){return e.offsetWidth},getSizeProperty:function(){return"width"},getCSSVariableName:function(){return"--carousel-item-width"}},y={getTransform:function(e){return"translate3d(0, ".concat(e,"px, 0)")},getMeasurement:function(e){return e.offsetHeight},getSizeProperty:function(){return"height"},getCSSVariableName:function(){return"--carousel-item-height"}};function h(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).debounceDelay,n=void 0===t?150:t,r=null,o=null;function i(){e.recalculateDimensions&&e.recalculateDimensions()}function u(){var e,t,r;e=i,t=n,o=function(){for(var n=this,o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];clearTimeout(r),r=setTimeout(function(){return e.apply(n,i)},t)},window.addEventListener("resize",o)}return{observe:function(){if(!("ResizeObserver"in window))return console.warn("ResizeObserver not supported. Using window resize fallback."),void u();r||(r=new ResizeObserver(function(){i()})),r.observe(e.container)},disconnect:function(){r&&(r.disconnect(),r=null),o&&(window.removeEventListener("resize",o),o=null)}}}return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(e){var t=e;if("string"==typeof e&&!(t=document.getElementById(e)))throw new Error('Carousel container with id "'.concat(e,'" not found'));if(!(t instanceof HTMLElement))throw new Error("Carousel container must be an HTMLElement or valid element ID");return t}(e),u=i.getAttribute("data-direction"),g=i.getAttribute("data-num-visible"),w=i.getAttribute("data-reverse"),S=o(o(o(o(o({},l),u&&{direction:f(u)}),g&&{numVisible:v(g)}),null!==w&&{reverse:(t=w,"string"==typeof t?"true"===t.toLowerCase():Boolean(t))}),r),O=f(S.direction),E=v(S.numVisible),D=i.querySelector(".c-carousel-group"),P=Array.from(i.querySelectorAll(".c-carousel-item")),A=P.length;!function(e,t){if(e>=t)throw new Error("numVisible (".concat(e,") must be less than item count (").concat(t,")."))}(E,A);var j=1,C=0,L=null,I=!1,k=function(e){var t=n(n({},a,p),c,y)[e];if(!t)throw new Error("Invalid direction: ".concat(e,'. Must be "').concat(a,'" or "').concat(c,'"'));return t}(O),z=null,x=null,T=null,N=null;function V(){var e=k.getMeasurement(i),t=e/E,n=A+E;return b(i,{"--carousel-item-width":"horizontal"===O?"".concat(t,"px"):"auto","--carousel-item-height":"vertical"===O?"".concat(t,"px"):"auto","--carousel-item-count":n,"--carousel-transition-duration":"".concat(S.transitionDuration,"ms")}),{itemSize:t,containerSize:e}}function R(e,t){D.style.transform=k.getTransform(e),void 0!==t&&b(i,{"--carousel-transition-duration":"".concat(t,"ms")})}function F(){L&&d(L,j,A),S.onSlideChange&&S.onSlideChange(j)}function M(e){var t=V().itemSize;if(void 0!==e?!e:S.reverse)return function(e){if(0===C)return j=A,R(C=-e*A,S.resetDuration),void setTimeout(function(){--j<1&&(j=A),R(C+=e*E,S.transitionDuration),F()},S.resetDuration+50);--j<1&&(j=A),R(C+=e*E,S.transitionDuration),F()}(t);!function(e){if(C===-e*A)return j=1,R(C=0,S.resetDuration),void setTimeout(function(){j++,R(C-=e*E,S.transitionDuration),F()},S.resetDuration+50);++j>A&&(j=1),R(C-=e*E,S.transitionDuration),F()}(t)}function H(){I&&(I=!1,i.setAttribute(s,"false"),z&&(z.getIsPaused()?z.resume():z.getIsRunning()||z.start()),S.onPlay&&S.onPlay())}function q(){I||(I=!0,i.setAttribute(s,"true"),z&&z.pause(),S.onPause&&S.onPause())}function _(){if(I)return H();q()}return function(){if(S.reverse){var e=m(P.slice(-E));D.insertBefore(e,D.firstChild);var t=V().itemSize;R(C=-t*E,0)}else{var n=m(P.slice(0,E));D.appendChild(n),V()}}(),S.announceSlides&&(L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite",n=document.createElement("div");return n.setAttribute("aria-live",t),n.setAttribute("aria-atomic","true"),n.className="".concat("c-carousel-liveregion"," ").concat("c-carousel-visuallyhidden"),e.appendChild(n),n}(i,S.ariaLive),d(L,j,A)),z=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).interval,n=void 0===t?2e3:t,r=null,o=0,i=!1,u=!1;function a(t){i||(0===o&&(o=t),t-o>=n&&(e.advanceSlide&&e.advanceSlide(),o=t)),r=requestAnimationFrame(a)}return{start:function(){u||(u=!0,i=!1,o=0,r=requestAnimationFrame(a))},stop:function(){r&&(cancelAnimationFrame(r),r=null),u=!1,i=!1,o=0},pause:function(){i=!0},resume:function(){i&&(i=!1,o=0)},getIsRunning:function(){return u},getIsPaused:function(){return i}}}({advanceSlide:M,container:i},{interval:S.interval}),S.observeResize&&(T=h({recalculateDimensions:V,container:i})).observe(),S.observeVisibility&&(x=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).threshold,n=void 0===t?.5:t,r=null;function o(t){t.forEach(function(t){t.isIntersecting?e.play():e.pause()})}return{observe:function(){"IntersectionObserver"in window?(r||(r=new IntersectionObserver(o,{threshold:n})),r.observe(e.container)):console.warn("IntersectionObserver not supported. Carousel will run continuously.")},disconnect:function(){r&&(r.disconnect(),r=null)}}}({play:H,pause:q,container:i},{threshold:.5}),x.observe()),S.keyboardNav&&(N=function(e){var t={ArrowRight:function(){return e.advanceSlide(!0)},ArrowDown:function(){return e.advanceSlide(!0)},ArrowLeft:function(){return e.advanceSlide(!1)},ArrowUp:function(){return e.advanceSlide(!1)}," ":function(){return e.togglePause()},Enter:function(){return e.togglePause()}};function n(e){var n=t[e.key];n&&(e.preventDefault(),n())}return{observe:function(){var t=e.container;t.setAttribute("tabindex","0"),t.setAttribute("role","region"),t.setAttribute("aria-roledescription","carousel"),t.addEventListener("keydown",n)},disconnect:function(){e.container.removeEventListener("keydown",n)}}}({advanceSlide:M,togglePause:_,container:i})).observe(),S.pauseOnHover&&(i.addEventListener("mouseenter",q),i.addEventListener("mouseleave",H)),S.pauseOnFocus&&(i.addEventListener("focusin",q),i.addEventListener("focusout",H)),S.autoplay&&z.start(),{play:H,pause:q,destroy:function(){z&&z.stop(),x&&x.disconnect(),T&&T.disconnect(),N&&N.disconnect(),S.pauseOnHover&&(i.removeEventListener("mouseenter",q),i.removeEventListener("mouseleave",H)),S.pauseOnFocus&&(i.removeEventListener("focusin",q),i.removeEventListener("focusout",H)),L&&L.remove(),S.onDestroy&&S.onDestroy()},updateConfig:function(e){Object.assign(S,e),void 0!==e.transitionDuration&&V()},container:i,config:S}}});