/*!
 * Continuous Carousel ðŸŽ  v1.0.1
 * Continuous carousel that uses vanilla JavaScript & CSS animations.
 * @author Jon Chretien
 * @license Released under the MIT license.
 */
const e="horizontal",n="vertical",t="data-paused",r={direction:e,numVisible:1,interval:2e3,transitionDuration:1e3,resetDuration:1,pauseOnHover:!1,pauseOnFocus:!1,autoplay:!0,observeVisibility:!0,observeResize:!0,ariaLive:"polite",announceSlides:!0,onSlideChange:null,onPause:null,onPlay:null,reverse:!1,keyboardNav:!0,onDestroy:null};function o(t){const r=t.toLowerCase().trim();if(r!==e&&r!==n)throw new Error(`Direction must be either "${e}" or "${n}"`);return r}function i(e){const n=Number(e);if(isNaN(n)||n<1||!Number.isInteger(n))throw new Error("numVisible must be a positive integer");return n}function s(e,n,t){e&&(e.textContent=`Item ${n} of ${t}`)}function u(e){const n=document.createDocumentFragment();return e.forEach(e=>{const t=e.cloneNode(!0);n.appendChild(t)}),n}function a(e,n){Object.entries(n).forEach(([n,t])=>{e.style.setProperty(n,t)})}const c={getTransform:e=>`translate3d(${e}px, 0, 0)`,getMeasurement:e=>e.offsetWidth,getSizeProperty:()=>"width",getCSSVariableName:()=>"--carousel-item-width"},l={getTransform:e=>`translate3d(0, ${e}px, 0)`,getMeasurement:e=>e.offsetHeight,getSizeProperty:()=>"height",getCSSVariableName:()=>"--carousel-item-height"};function d(e,n={}){const{debounceDelay:t=150}=n;let r=null,o=null;function i(){e.recalculateDimensions&&e.recalculateDimensions()}function s(){o=function(e,n){let t;return function(...r){clearTimeout(t),t=setTimeout(()=>e.apply(this,r),n)}}(i,t),window.addEventListener("resize",o)}return{observe:function(){if(!("ResizeObserver"in window))return console.warn("ResizeObserver not supported. Using window resize fallback."),void s();r||(r=new ResizeObserver(()=>{i()})),r.observe(e.container)},disconnect:function(){r&&(r.disconnect(),r=null),o&&(window.removeEventListener("resize",o),o=null)}}}function f(f,v={}){const m=function(e){let n=e;if("string"==typeof e&&(n=document.getElementById(e),!n))throw new Error(`Carousel container with id "${e}" not found`);if(!(n instanceof HTMLElement))throw new Error("Carousel container must be an HTMLElement or valid element ID");return n}(f),b=m.getAttribute("data-direction"),p=m.getAttribute("data-num-visible"),g=m.getAttribute("data-reverse"),h={...r,...b&&{direction:o(b)},...p&&{numVisible:i(p)},...null!==g&&{reverse:(w=g,"string"==typeof w?"true"===w.toLowerCase():Boolean(w))},...v};var w;const y=o(h.direction),E=i(h.numVisible),S=m.querySelector(".c-carousel-group"),D=Array.from(m.querySelectorAll(".c-carousel-item")),A=D.length;!function(e,n){if(e>=n)throw new Error(`numVisible (${e}) must be less than item count (${n}).`)}(E,A);let L=1,z=0,C=null,$=!1;const O=function(t){const r={[e]:c,[n]:l}[t];if(!r)throw new Error(`Invalid direction: ${t}. Must be "${e}" or "${n}"`);return r}(y);let P=null,I=null,N=null,T=null;function V(){const e=O.getMeasurement(m),n=e/E;return a(m,{"--carousel-item-width":"horizontal"===y?`${n}px`:"auto","--carousel-item-height":"vertical"===y?`${n}px`:"auto","--carousel-item-count":A+E,"--carousel-transition-duration":`${h.transitionDuration}ms`}),{itemSize:n,containerSize:e}}function R(e,n){S.style.transform=O.getTransform(e),void 0!==n&&a(m,{"--carousel-transition-duration":`${n}ms`})}function x(){C&&s(C,L,A),h.onSlideChange&&h.onSlideChange(L)}function F(e){const{itemSize:n}=V();if(void 0!==e?!e:h.reverse)return function(e){if(0===z)return z=-e*A,L=A,R(z,h.resetDuration),void setTimeout(()=>{z+=e*E,L--,L<1&&(L=A),R(z,h.transitionDuration),x()},h.resetDuration+50);z+=e*E,L--,L<1&&(L=A),R(z,h.transitionDuration),x()}(n);!function(e){if(z===-e*A)return z=0,L=1,R(z,h.resetDuration),void setTimeout(()=>{z-=e*E,L++,R(z,h.transitionDuration),x()},h.resetDuration+50);z-=e*E,L++,L>A&&(L=1),R(z,h.transitionDuration),x()}(n)}function k(){$&&($=!1,m.setAttribute(t,"false"),P&&(P.getIsPaused()?P.resume():P.getIsRunning()||P.start()),h.onPlay&&h.onPlay())}function H(){$||($=!0,m.setAttribute(t,"true"),P&&P.pause(),h.onPause&&h.onPause())}function M(){if($)return k();H()}return function(){if(h.reverse){const e=u(D.slice(-E));S.insertBefore(e,S.firstChild);const{itemSize:n}=V();return z=-n*E,void R(z,0)}const e=u(D.slice(0,E));S.appendChild(e),V()}(),h.announceSlides&&(C=function(e,n="polite"){const t=document.createElement("div");return t.setAttribute("aria-live",n),t.setAttribute("aria-atomic","true"),t.className="c-carousel-liveregion c-carousel-visuallyhidden",e.appendChild(t),t}(m,h.ariaLive),s(C,L,A)),P=function(e,n={}){const{interval:t=2e3}=n;let r=null,o=0,i=!1,s=!1;function u(n){i||(0===o&&(o=n),n-o>=t&&(e.advanceSlide&&e.advanceSlide(),o=n)),r=requestAnimationFrame(u)}return{start:function(){s||(s=!0,i=!1,o=0,r=requestAnimationFrame(u))},stop:function(){r&&(cancelAnimationFrame(r),r=null),s=!1,i=!1,o=0},pause:function(){i=!0},resume:function(){i&&(i=!1,o=0)},getIsRunning:function(){return s},getIsPaused:function(){return i}}}({advanceSlide:F,container:m},{interval:h.interval}),h.observeResize&&(N=d({recalculateDimensions:V,container:m}),N.observe()),h.observeVisibility&&(I=function(e,n={}){const{threshold:t=.5}=n;let r=null;function o(n){n.forEach(n=>{n.isIntersecting?e.play():e.pause()})}return{observe:function(){"IntersectionObserver"in window?(r||(r=new IntersectionObserver(o,{threshold:t})),r.observe(e.container)):console.warn("IntersectionObserver not supported. Carousel will run continuously.")},disconnect:function(){r&&(r.disconnect(),r=null)}}}({play:k,pause:H,container:m},{threshold:.5}),I.observe()),h.keyboardNav&&(T=function(e){const n={ArrowRight:()=>e.advanceSlide(!0),ArrowDown:()=>e.advanceSlide(!0),ArrowLeft:()=>e.advanceSlide(!1),ArrowUp:()=>e.advanceSlide(!1)," ":()=>e.togglePause(),Enter:()=>e.togglePause()};function t(e){const t=n[e.key];t&&(e.preventDefault(),t())}return{observe:function(){const n=e.container;n.setAttribute("tabindex","0"),n.setAttribute("role","region"),n.setAttribute("aria-roledescription","carousel"),n.addEventListener("keydown",t)},disconnect:function(){e.container.removeEventListener("keydown",t)}}}({advanceSlide:F,togglePause:M,container:m}),T.observe()),h.pauseOnHover&&(m.addEventListener("mouseenter",H),m.addEventListener("mouseleave",k)),h.pauseOnFocus&&(m.addEventListener("focusin",H),m.addEventListener("focusout",k)),h.autoplay&&P.start(),{play:k,pause:H,destroy:function(){P&&P.stop(),I&&I.disconnect(),N&&N.disconnect(),T&&T.disconnect(),h.pauseOnHover&&(m.removeEventListener("mouseenter",H),m.removeEventListener("mouseleave",k)),h.pauseOnFocus&&(m.removeEventListener("focusin",H),m.removeEventListener("focusout",k)),C&&C.remove(),h.onDestroy&&h.onDestroy()},updateConfig:function(e){Object.assign(h,e),void 0!==e.transitionDuration&&V()},container:m,config:h}}export{f as default};