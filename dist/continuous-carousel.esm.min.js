/*!
 * Continuous Carousel ðŸŽ  v0.4.1
 * Continuous carousel that uses vanilla JavaScript & CSS animations.
 * @author Jon Chretien
 * @license Released under the MIT license.
 */
const e="horizontal",n="vertical",t="data-paused",o={direction:e,numVisible:1,interval:2e3,transitionDuration:1e3,resetDuration:1,pauseOnHover:!1,pauseOnFocus:!1,autoplay:!0,observeVisibility:!0,observeResize:!0,ariaLive:"polite",announceSlides:!0,onSlideChange:null,onPause:null,onPlay:null,reverse:!1,onDestroy:null};function i(t){const o=t.toLowerCase().trim();if(o!==e&&o!==n)throw new Error(`Direction must be either "${e}" or "${n}"`);return o}function r(e){const n=Number(e);if(isNaN(n)||n<1||!Number.isInteger(n))throw new Error("numVisible must be a positive integer");return n}function s(e,n,t){e&&(e.textContent=`Item ${n} of ${t}`)}function a(e){const n=document.createDocumentFragment();return e.forEach(e=>{const t=e.cloneNode(!0);n.appendChild(t)}),n}function u(e,n){Object.entries(n).forEach(([n,t])=>{e.style.setProperty(n,t)})}const l={getTransform:e=>`translate3d(${e}px, 0, 0)`,getMeasurement:e=>e.offsetWidth,getSizeProperty:()=>"width",getCSSVariableName:()=>"--carousel-item-width"},c={getTransform:e=>`translate3d(0, ${e}px, 0)`,getMeasurement:e=>e.offsetHeight,getSizeProperty:()=>"height",getCSSVariableName:()=>"--carousel-item-height"};function d(e,n={}){const{debounceDelay:t=150}=n;let o=null,i=null;function r(){e.recalculateDimensions&&e.recalculateDimensions()}function s(){i=function(e,n){let t;return function(...o){clearTimeout(t),t=setTimeout(()=>e.apply(this,o),n)}}(r,t),window.addEventListener("resize",i)}return{observe:function(){if(!("ResizeObserver"in window))return console.warn("ResizeObserver not supported. Using window resize fallback."),void s();o||(o=new ResizeObserver(()=>{r()})),o.observe(e.container)},disconnect:function(){o&&(o.disconnect(),o=null),i&&(window.removeEventListener("resize",i),i=null)}}}function m(m,f={}){const v=function(e){let n=e;if("string"==typeof e&&(n=document.getElementById(e),!n))throw new Error(`Carousel container with id "${e}" not found`);if(!(n instanceof HTMLElement))throw new Error("Carousel container must be an HTMLElement or valid element ID");return n}(m),h=v.getAttribute("data-direction"),g=v.getAttribute("data-num-visible"),p=v.getAttribute("data-reverse"),b={...o,...h&&{direction:i(h)},...g&&{numVisible:r(g)},...null!==p&&{reverse:(w=p,"string"==typeof w?"true"===w.toLowerCase():Boolean(w))},...f};var w;const y=i(b.direction),S=r(b.numVisible),C=v.querySelector(".c-carousel-group"),D=Array.from(v.querySelectorAll(".c-carousel-item")),E=D.length;!function(e,n){e>=n&&console.warn(`numVisible (${e}) must be less than item count (${n}). Carousel may not behave correctly.`)}(S,E);let z=1,L=0,$=null,O=!1;const I=function(t){const o={[e]:l,[n]:c}[t];if(!o)throw new Error(`Invalid direction: ${t}. Must be "${e}" or "${n}"`);return o}(y);let A=null,P=null,T=null;function V(){const e=I.getMeasurement(v),n=e/S;return u(v,{"--carousel-item-width":"horizontal"===y?`${n}px`:"auto","--carousel-item-height":"vertical"===y?`${n}px`:"auto","--carousel-item-count":E+S,"--carousel-transition-duration":`${b.transitionDuration}ms`}),{itemSize:n,containerSize:e}}function N(e,n){C.style.transform=I.getTransform(e),void 0!==n&&u(v,{"--carousel-transition-duration":`${n}ms`})}function F(){const{itemSize:e}=V();if(b.reverse){L===0?(L=-e*E,z=E,N(L,b.resetDuration),setTimeout(()=>{L+=e*S,z--,z<1&&(z=E),N(L,b.transitionDuration),$&&s($,z,E),b.onSlideChange&&b.onSlideChange(z)},b.resetDuration+50)):(L+=e*S,z--,z<1&&(z=E),N(L,b.transitionDuration),$&&s($,z,E),b.onSlideChange&&b.onSlideChange(z))}else{L===-e*E?(L=0,z=1,N(L,b.resetDuration),setTimeout(()=>{L-=e*S,z++,N(L,b.transitionDuration),$&&s($,z,E),b.onSlideChange&&b.onSlideChange(z)},b.resetDuration+50)):(L-=e*S,z++,z>E&&(z=1),N(L,b.transitionDuration),$&&s($,z,E),b.onSlideChange&&b.onSlideChange(z))}}function R(){O&&(O=!1,v.setAttribute(t,"false"),A&&(A.getIsPaused()?A.resume():A.getIsRunning()||A.start()),b.onPlay&&b.onPlay())}function x(){O||(O=!0,v.setAttribute(t,"true"),A&&A.pause(),b.onPause&&b.onPause())}return function(){if(b.reverse){const e=a(D.slice(-S));C.insertBefore(e,C.firstChild);const{itemSize:n}=V();L=-n*S,N(L,0)}else{const e=a(D.slice(0,S));C.appendChild(e),V()}b.announceSlides&&($=function(e,n="polite"){const t=document.createElement("div");return t.setAttribute("aria-live",n),t.setAttribute("aria-atomic","true"),t.className="c-carousel-liveregion c-carousel-visuallyhidden",e.appendChild(t),t}(v,b.ariaLive),s($,z,E)),A=function(e,n={}){const{interval:t=2e3}=n;let o=null,i=0,r=!1,s=!1;function a(n){r||(0===i&&(i=n),n-i>=t&&(e.advanceSlide&&e.advanceSlide(),i=n)),o=requestAnimationFrame(a)}return{start:function(){s||(s=!0,r=!1,i=0,o=requestAnimationFrame(a))},stop:function(){o&&(cancelAnimationFrame(o),o=null),s=!1,r=!1,i=0},pause:function(){r=!0},resume:function(){r&&(r=!1,i=0)},getIsRunning:function(){return s},getIsPaused:function(){return r}}}({advanceSlide:F,container:v},{interval:b.interval}),b.observeResize&&(T=d({recalculateDimensions:V,container:v}),T.observe()),b.observeVisibility&&(P=function(e,n={}){const{threshold:t=.5}=n;let o=null;function i(n){n.forEach(n=>{n.isIntersecting?e.play():e.pause()})}return{observe:function(){"IntersectionObserver"in window?(o||(o=new IntersectionObserver(i,{threshold:t})),o.observe(e.container)):console.warn("IntersectionObserver not supported. Carousel will run continuously.")},disconnect:function(){o&&(o.disconnect(),o=null)}}}({play:R,pause:x,container:v},{threshold:.5}),P.observe()),b.pauseOnHover&&(v.addEventListener("mouseenter",x),v.addEventListener("mouseleave",R)),b.pauseOnFocus&&(v.addEventListener("focusin",x),v.addEventListener("focusout",R)),b.autoplay&&A.start()}(),{play:R,pause:x,destroy:function(){A&&A.stop(),P&&P.disconnect(),T&&T.disconnect(),b.pauseOnHover&&(v.removeEventListener("mouseenter",x),v.removeEventListener("mouseleave",R)),b.pauseOnFocus&&(v.removeEventListener("focusin",x),v.removeEventListener("focusout",R)),$&&$.remove(),b.onDestroy&&b.onDestroy()},updateConfig:function(e){Object.assign(b,e),void 0!==e.transitionDuration&&V()},container:v,config:b}}export{m as default};