/*!
 * Continuous Carousel ðŸŽ  v0.4.0
 * Continuous carousel that uses vanilla JavaScript & CSS animations.
 * @author Jon Chretien
 * @license Released under the MIT license.
 */
const e="horizontal",n="vertical",t="data-paused",i={direction:e,numVisible:1,interval:2e3,transitionDuration:1e3,resetDuration:1,pauseOnHover:!1,pauseOnFocus:!1,autoplay:!0,observeVisibility:!0,observeResize:!0,ariaLive:"polite",announceSlides:!0,onSlideChange:null,onPause:null,onPlay:null,reverse:!1,onDestroy:null};function o(t){const i=t.toLowerCase().trim();if(i!==e&&i!==n)throw new Error(`Direction must be either "${e}" or "${n}"`);return i}function r(e){const n=Number(e);if(isNaN(n)||n<1||!Number.isInteger(n))throw new Error("numVisible must be a positive integer");return n}function s(e,n,t){e&&(e.textContent=`Item ${n} of ${t}`)}function a(e){const n=document.createDocumentFragment();return e.forEach(e=>{const t=e.cloneNode(!0);n.appendChild(t)}),n}function u(e,n){Object.entries(n).forEach(([n,t])=>{e.style.setProperty(n,t)})}const l={getTransform:e=>`translate3d(${e}px, 0, 0)`,getMeasurement:e=>e.offsetWidth,getSizeProperty:()=>"width",getCSSVariableName:()=>"--carousel-item-width"},c={getTransform:e=>`translate3d(0, ${e}px, 0)`,getMeasurement:e=>e.offsetHeight,getSizeProperty:()=>"height",getCSSVariableName:()=>"--carousel-item-height"};function d(e,n={}){const{debounceDelay:t=150}=n;let i=null,o=null;function r(){e.recalculateDimensions&&e.recalculateDimensions()}function s(){o=function(e,n){let t;return function(...i){clearTimeout(t),t=setTimeout(()=>e.apply(this,i),n)}}(r,t),window.addEventListener("resize",o)}return{observe:function(){if(!("ResizeObserver"in window))return console.warn("ResizeObserver not supported. Using window resize fallback."),void s();i||(i=new ResizeObserver(()=>{r()})),i.observe(e.container)},disconnect:function(){i&&(i.disconnect(),i=null),o&&(window.removeEventListener("resize",o),o=null)}}}function f(f,m={}){const v=function(e){let n=e;if("string"==typeof e&&(n=document.getElementById(e),!n))throw new Error(`Carousel container with id "${e}" not found`);if(!(n instanceof HTMLElement))throw new Error("Carousel container must be an HTMLElement or valid element ID");return n}(f),g=v.getAttribute("data-direction"),p=v.getAttribute("data-num-visible"),h=v.getAttribute("data-reverse"),b={...i,...g&&{direction:o(g)},...p&&{numVisible:r(p)},...null!==h&&{reverse:(w=h,"string"==typeof w?"true"===w.toLowerCase():Boolean(w))},...m};var w;const y=o(b.direction),S=r(b.numVisible),C=v.querySelector(".c-carousel-group"),D=Array.from(v.querySelectorAll(".c-carousel-item")),E=D.length;let z=1,L=0,O=null,$=!1;const I=function(t){const i={[e]:l,[n]:c}[t];if(!i)throw new Error(`Invalid direction: ${t}. Must be "${e}" or "${n}"`);return i}(y);let A=null,P=null,T=null;function N(){const e=I.getMeasurement(v),n=e/S;return u(v,{"--carousel-item-width":"horizontal"===y?`${n}px`:"auto","--carousel-item-height":"vertical"===y?`${n}px`:"auto","--carousel-item-count":E+S,"--carousel-transition-duration":`${b.transitionDuration}ms`}),{itemSize:n,containerSize:e}}function V(e,n){C.style.transform=I.getTransform(e),void 0!==n&&u(v,{"--carousel-transition-duration":`${n}ms`})}function F(){const{itemSize:e}=N();if(b.reverse){L===0?(L=-e*E,z=E,V(L,b.resetDuration),setTimeout(()=>{L+=e*S,z--,z<1&&(z=E),V(L,b.transitionDuration),O&&s(O,z,E),b.onSlideChange&&b.onSlideChange(z)},b.resetDuration+50)):(L+=e*S,z--,z<1&&(z=E),V(L,b.transitionDuration),O&&s(O,z,E),b.onSlideChange&&b.onSlideChange(z))}else{L===-e*E?(L=0,z=1,V(L,b.resetDuration),setTimeout(()=>{L-=e*S,z++,V(L,b.transitionDuration),O&&s(O,z,E),b.onSlideChange&&b.onSlideChange(z)},b.resetDuration+50)):(L-=e*S,z++,z>E&&(z=1),V(L,b.transitionDuration),O&&s(O,z,E),b.onSlideChange&&b.onSlideChange(z))}}function R(){$&&($=!1,v.setAttribute(t,"false"),A&&(A.getIsPaused()?A.resume():A.getIsRunning()||A.start()),b.onPlay&&b.onPlay())}function x(){$||($=!0,v.setAttribute(t,"true"),A&&A.pause(),b.onPause&&b.onPause())}return function(){if(b.reverse){const e=a(D.slice(-S));C.insertBefore(e,C.firstChild);const{itemSize:n}=N();L=-n*S,V(L,0)}else{const e=a(D.slice(0,S));C.appendChild(e),N()}b.announceSlides&&(O=function(e,n="polite"){const t=document.createElement("div");return t.setAttribute("aria-live",n),t.setAttribute("aria-atomic","true"),t.className="c-carousel-liveregion c-carousel-visuallyhidden",e.appendChild(t),t}(v,b.ariaLive),s(O,z,E)),A=function(e,n={}){const{interval:t=2e3}=n;let i=null,o=0,r=!1,s=!1;function a(n){r||(0===o&&(o=n),n-o>=t&&(e.advanceSlide&&e.advanceSlide(),o=n)),i=requestAnimationFrame(a)}return{start:function(){s||(s=!0,r=!1,o=0,i=requestAnimationFrame(a))},stop:function(){i&&(cancelAnimationFrame(i),i=null),s=!1,r=!1,o=0},pause:function(){r=!0},resume:function(){r&&(r=!1,o=0)},getIsRunning:function(){return s},getIsPaused:function(){return r}}}({advanceSlide:F,container:v},{interval:b.interval}),b.observeResize&&(T=d({recalculateDimensions:N,container:v}),T.observe()),b.observeVisibility&&(P=function(e,n={}){const{threshold:t=.5}=n;let i=null;function o(n){n.forEach(n=>{n.isIntersecting?e.play():e.pause()})}return{observe:function(){"IntersectionObserver"in window?(i||(i=new IntersectionObserver(o,{threshold:t})),i.observe(e.container)):console.warn("IntersectionObserver not supported. Carousel will run continuously.")},disconnect:function(){i&&(i.disconnect(),i=null)}}}({play:R,pause:x,container:v},{threshold:.5}),P.observe()),b.pauseOnHover&&(v.addEventListener("mouseenter",x),v.addEventListener("mouseleave",R)),b.pauseOnFocus&&(v.addEventListener("focusin",x),v.addEventListener("focusout",R)),b.autoplay&&A.start()}(),{play:R,pause:x,destroy:function(){A&&A.stop(),P&&P.disconnect(),T&&T.disconnect(),b.pauseOnHover&&(v.removeEventListener("mouseenter",x),v.removeEventListener("mouseleave",R)),b.pauseOnFocus&&(v.removeEventListener("focusin",x),v.removeEventListener("focusout",R)),O&&O.remove(),b.onDestroy&&b.onDestroy()},updateConfig:function(e){Object.assign(b,e),void 0!==e.transitionDuration&&N()},container:v,config:b}}export{f as default};