/*!
 * Continuous Carousel ðŸŽ  v1.0.1
 * Continuous carousel that uses vanilla JavaScript & CSS animations.
 * @author Jon Chretien
 * @license Released under the MIT license.
 */
const e="horizontal",t="vertical",n="data-paused",r={direction:e,numVisible:1,interval:2e3,transitionDuration:1e3,resetDuration:1,pauseOnHover:!1,pauseOnFocus:!1,autoplay:!0,observeVisibility:!0,observeResize:!0,ariaLive:"polite",announceSlides:!0,onSlideChange:null,onPause:null,onPlay:null,reverse:!1,keyboardNav:!0,onDestroy:null};function i(n){const r=n.toLowerCase().trim();if(r!==e&&r!==t)throw new Error(`Direction must be either "${e}" or "${t}"`);return r}function o(e){const t=Number(e);if(isNaN(t)||t<1||!Number.isInteger(t))throw new Error("numVisible must be a positive integer");return t}function s(e,t,n){e&&(e.textContent=`Item ${t} of ${n}`)}function a(e){const t=document.createDocumentFragment();return e.forEach(e=>{const n=e.cloneNode(!0);t.appendChild(n)}),t}function u(e,t){Object.entries(t).forEach(([t,n])=>{e.style.setProperty(t,n)})}const c={getTransform:e=>`translate3d(${e}px, 0, 0)`,getMeasurement:e=>e.offsetWidth,getSizeProperty:()=>"width",getCSSVariableName:()=>"--carousel-item-width"},l={getTransform:e=>`translate3d(0, ${e}px, 0)`,getMeasurement:e=>e.offsetHeight,getSizeProperty:()=>"height",getCSSVariableName:()=>"--carousel-item-height"};function d(e,t={}){const{debounceDelay:n=150}=t;let r=null,i=null;function o(){e.recalculateDimensions&&e.recalculateDimensions()}function s(){i=function(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}(o,n),window.addEventListener("resize",i)}return{observe:function(){if(!("ResizeObserver"in window))return console.warn("ResizeObserver not supported. Using window resize fallback."),void s();r||(r=new ResizeObserver(()=>{o()})),r.observe(e.container)},disconnect:function(){r&&(r.disconnect(),r=null),i&&(window.removeEventListener("resize",i),i=null)}}}function f(f,v={}){const m=function(e){let t=e;if("string"==typeof e&&(t=document.getElementById(e),!t))throw new Error(`Carousel container with id "${e}" not found`);if(!(t instanceof HTMLElement))throw new Error("Carousel container must be an HTMLElement or valid element ID");return t}(f),b=m.getAttribute("data-direction"),p=m.getAttribute("data-num-visible"),g=m.getAttribute("data-reverse"),h={...r,...b&&{direction:i(b)},...p&&{numVisible:o(p)},...null!==g&&{reverse:(w=g,"string"==typeof w?"true"===w.toLowerCase():Boolean(w))},...v};var w;const y=i(h.direction),D=o(h.numVisible),E=m.querySelector(".c-carousel-group"),S=Array.from(m.querySelectorAll(".c-carousel-item")),A=S.length;!function(e,t){if(e>=t)throw new Error(`numVisible (${e}) must be less than item count (${t}).`)}(D,A);let L=1,z=0,C=null,$=!1;const O=function(n){const r={[e]:c,[t]:l}[n];if(!r)throw new Error(`Invalid direction: ${n}. Must be "${e}" or "${t}"`);return r}(y);let I=null,P=null,N=null,T=null;function V(){const e=O.getMeasurement(m),t=e/D;return u(m,{"--carousel-item-width":"horizontal"===y?`${t}px`:"auto","--carousel-item-height":"vertical"===y?`${t}px`:"auto","--carousel-item-count":A+D,"--carousel-transition-duration":`${h.transitionDuration}ms`}),{itemSize:t,containerSize:e}}function k(e,t){E.style.transform=O.getTransform(e),void 0!==t&&u(m,{"--carousel-transition-duration":`${t}ms`})}function R(){C&&s(C,L,A),h.onSlideChange&&h.onSlideChange(L)}function x(e){const{itemSize:t}=V();if(void 0!==e?!e:h.reverse)return function(e){if(0===z)return z=-e*A,L=A,k(z,h.resetDuration),void setTimeout(()=>{z+=e*D,L--,L<1&&(L=A),k(z,h.transitionDuration),R()},h.resetDuration+50);z+=e*D,L--,L<1&&(L=A),k(z,h.transitionDuration),R()}(t);!function(e){if(z===-e*A)return z=0,L=1,k(z,h.resetDuration),void setTimeout(()=>{z-=e*D,L++,k(z,h.transitionDuration),R()},h.resetDuration+50);z-=e*D,L++,L>A&&(L=1),k(z,h.transitionDuration),R()}(t)}function F(){$&&($=!1,m.setAttribute(n,"false"),I&&(I.getIsPaused()?I.resume():I.getIsRunning()||I.start()),h.onPlay&&h.onPlay())}function H(){$||($=!0,m.setAttribute(n,"true"),I&&I.pause(),h.onPause&&h.onPause())}function M(){if($)return F();H()}return function(){if(h.reverse){const e=a(S.slice(-D));E.insertBefore(e,E.firstChild);const{itemSize:t}=V();return z=-t*D,void k(z,0)}const e=a(S.slice(0,D));E.appendChild(e),V()}(),h.announceSlides&&(C=function(e,t="polite"){const n=document.createElement("div");return n.setAttribute("aria-live",t),n.setAttribute("aria-atomic","true"),n.className="c-carousel-liveregion c-carousel-visuallyhidden",e.appendChild(n),n}(m,h.ariaLive),s(C,L,A)),I=function(e,t={}){const{interval:n=2e3}=t;let r=null,i=0,o=!1,s=!1;function a(t){o||(0===i&&(i=t),t-i>=n&&(e.advanceSlide&&e.advanceSlide(),i=t)),r=requestAnimationFrame(a)}return{start:function(){s||(s=!0,o=!1,i=0,r=requestAnimationFrame(a))},stop:function(){r&&(cancelAnimationFrame(r),r=null),s=!1,o=!1,i=0},pause:function(){o=!0},resume:function(){o&&(o=!1,i=0)},getIsRunning:function(){return s},getIsPaused:function(){return o}}}({advanceSlide:x,container:m},{interval:h.interval}),h.observeResize&&(N=d({recalculateDimensions:V,container:m}),N.observe()),h.observeVisibility&&(P=function(e,t={}){const{threshold:n=.5}=t;let r=null;function i(t){t.forEach(t=>{t.isIntersecting?e.play():e.pause()})}return{observe:function(){"IntersectionObserver"in window?(r||(r=new IntersectionObserver(i,{threshold:n})),r.observe(e.container)):console.warn("IntersectionObserver not supported. Carousel will run continuously.")},disconnect:function(){r&&(r.disconnect(),r=null)}}}({play:F,pause:H,container:m},{threshold:.5}),P.observe()),h.keyboardNav&&(T=function(e){function t(t){switch(t.key){case"ArrowRight":case"ArrowDown":t.preventDefault(),e.advanceSlide(!0);break;case"ArrowLeft":case"ArrowUp":t.preventDefault(),e.advanceSlide(!1);break;case" ":case"Enter":t.preventDefault(),e.togglePause()}}return{observe:function(){const n=e.container;n.setAttribute("tabindex","0"),n.setAttribute("role","region"),n.setAttribute("aria-roledescription","carousel"),n.addEventListener("keydown",t)},disconnect:function(){e.container.removeEventListener("keydown",t)}}}({advanceSlide:x,togglePause:M,container:m}),T.observe()),h.pauseOnHover&&(m.addEventListener("mouseenter",H),m.addEventListener("mouseleave",F)),h.pauseOnFocus&&(m.addEventListener("focusin",H),m.addEventListener("focusout",F)),h.autoplay&&I.start(),{play:F,pause:H,destroy:function(){I&&I.stop(),P&&P.disconnect(),N&&N.disconnect(),T&&T.disconnect(),h.pauseOnHover&&(m.removeEventListener("mouseenter",H),m.removeEventListener("mouseleave",F)),h.pauseOnFocus&&(m.removeEventListener("focusin",H),m.removeEventListener("focusout",F)),C&&C.remove(),h.onDestroy&&h.onDestroy()},updateConfig:function(e){Object.assign(h,e),void 0!==e.transitionDuration&&V()},container:m,config:h}}export{f as default};